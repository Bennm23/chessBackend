#!/bin/bash

startdir=$pwd
cd ./src/proto
echo > ../hold_modules
echo "// @generated by genProto" >> ../hold_modules
for file in `ls .`
do
	echo $file
	protoc --java_out /mnt/c/Users/bennm/OneDrive/Desktop/chessGUI/src/main/java/ $file
	protoc --rust_out /home/bmelling/rust/chessBackend/src/generated $file
	echo "pub mod ${file::-6};" >> ../hold_modules

done

mv ../hold_modules /home/bmelling/rust/chessBackend/src/generated/mod.rs

cd $startdir
